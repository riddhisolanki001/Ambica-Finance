[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Tax Withholding Category",
  "enabled": 1,
  "modified": "2023-12-27 17:29:06.919064",
  "module": "Ambica Finance",
  "name": "Tax Withholding Category Name",
  "script": "frappe.ui.form.on('Tax Withholding Category', {\n    refresh: function(frm) {\n        // Your script logic here\n    },\n    onload: function(frm) {\n        // Check if the document is in Draft state (new form)\n        if (frm.doc.docstatus === 0) {\n            // Set a default value for the __newname field during onload for new forms\n            frm.set_value('__newname', frm.doc.custom_type + '-' + frm.doc.custom_sub_category);\n        }\n    },\n    custom_section: function(frm) {\n        if (frm.doc.category_name) {\n            // Update the __newname field when custom_section changes and category_name is not null\n            frm.set_value('__newname', frm.doc.custom_type + '-' + frm.doc.custom_section + '-' + frm.doc.category_name + '-' + frm.doc.custom_sub_category);\n        } else {\n            // Handle the case when category_name is null\n            // You can run another query or set a different value as needed\n            frm.set_value('__newname', frm.doc.custom_type + '-' + frm.doc.custom_section + '-' + frm.doc.custom_sub_category);\n        }\n        \n    },\n    custom_sub_category: function(frm) {\n        // Set a default value for the __newname field by concatenating custom_type and custom_section\n        frm.set_value('__newname', frm.doc.custom_type + '-' + frm.doc.custom_section + '-' + frm.doc.category_name + '-' + frm.doc.custom_sub_category);\n    },\n    custom_type: function(frm) {\n        // Set a default value for the __newname field by concatenating custom_type and custom_section\n        frm.set_value('__newname', frm.doc.custom_type + '-' + frm.doc.custom_section + '-' + frm.doc.category_name + '-' + frm.doc.custom_sub_category);\n    }\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Memorandum Invoice",
  "enabled": 1,
  "modified": "2023-12-28 15:04:52.331089",
  "module": "Ambica Finance",
  "name": "Get full address from address name",
  "script": "frappe.ui.form.on(\"Memorandum Invoice\", \"company_address_name\", function(frm, cdt, cdn) {\n    if(frm.doc.company_address_name){\n      return frm.call({\n      method: \"frappe.contacts.doctype.address.address.get_address_display\",\n      args: {\n         \"address_dict\": frm.doc.company_address_name\n      },\n      callback: function(r) {\n        if(r.message)\n            frm.set_value(\"company_address\", r.message);\n        \n      }\n     });\n    }\n    else{\n        frm.set_value(\"company_address\", \"\");\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Payment Entry",
  "enabled": 1,
  "modified": "2024-01-01 17:44:59.957603",
  "module": "Ambica Finance",
  "name": "Set Cheque/Reference No",
  "script": "frappe.ui.form.on('Payment Entry', {\n    refresh: function(frm) {\n        // Fetch the last reference_no\n        frappe.call({\n            method: 'frappe.client.get_list',\n            args: {\n                doctype: 'Payment Entry',\n                fields: ['reference_no'],\n                order_by: 'creation desc',\n                limit: 1\n            },\n            callback: function(response) {\n                var lastReferenceNo = response.message && response.message.length > 0\n                    ? parseInt(response.message[0].reference_no) || 0\n                    : 0;\n\n                // Set reference_no based on the last reference_no\n                if (!frm.doc.__islocal) {\n                    // If the form is existing, don't change reference_no\n                } else if (lastReferenceNo === 0) {\n                    // If it's the first form, set reference_no to 10\n                    frm.set_value('reference_no', 10);\n                } else {\n                    // For subsequent forms, set reference_no to 20\n                    frm.set_value('reference_no', lastReferenceNo + 1);\n                }\n            }\n        });\n    }\n});\n",
  "view": "Form"
 }
]