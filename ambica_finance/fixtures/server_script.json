[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-01-30 10:31:37.606490",
  "module": "Ambica Finance",
  "name": "Creation of PI after PR is Submitted",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Purchase Receipt",
  "script": "if doc.docstatus == 1:\n    purchase_invoice = frappe.new_doc(\"Purchase Invoice\")\n    \n    # Set relevant fields from the Purchase Receipt\n    purchase_invoice.supplier = doc.supplier\n    purchase_invoice.posting_date = doc.posting_date\n    purchase_invoice.company = doc.company\n    \n    # Set other fields as needed\n    frappe.msgprint(\"Purchase Invoice is Created\")\n    # Add items from the Purchase Receipt to the Purchase Invoice\n    for item in doc.items:\n        invoice_item = purchase_invoice.append('items')\n        invoice_item.item_code = item.item_code\n        invoice_item.qty = item.qty\n        invoice_item.rate = item.rate\n        # Add other item details as needed\n    \n    # Save the Purchase Invoice\n    purchase_invoice.insert()\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-01-29 15:17:05.743119",
  "module": "Ambica Finance",
  "name": "Email send to User if invoice on Hold",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Purchase Invoice",
  "script": "if doc.doctype == \"Purchase Invoice\" and doc.custom_effective_date and doc.hold_comment:\n    \n    owner_username = frappe.db.get_value(\"User\",doc.owner,\"username\")\n    username = frappe.db.get_value(\"User\",frappe.session.user,\"username\")\n    \n    frappe.sendmail(\n        recipients = doc.owner,\n        subject='Purchase Invoice On Hold',\n        template = 'purchase_invoice_onhold',\n        sender = frappe.frappe.session.user,\n        header=_(\"Purchase Invoice On Hold\"),\n        delayed=False,\n        args={'doc': doc, 'owner_username':owner_username,'username':username}\n    )\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-13 17:08:37.481041",
  "module": "Ambica Finance",
  "name": "Auto Account Entry for Supplier",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Supplier",
  "script": "com = frappe.db.get_list('Company', pluck='name')\ndata = frappe.new_doc(\"Account\")\nrec = \"Accounts Payable\"\nfor i in range(len(com)):\n    if com[i] == doc.custom_company:\n        frappe.msgprint(com[i])\n        dt = frappe.db.sql(\"SELECT name FROM `tabAccount` WHERE name LIKE %s and company=%s\", ('%' + rec + '%', com[i]), as_dict=True)\n        data.company = doc.custom_company\n        data.account_name = doc.name\n        data.account_type = \"Payable\"\n        data.parent_account = dt[0][\"name\"]\n        data.save()\n        doc.custom_default_company_account=data.name\n        doc.save()",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-12 15:32:40.923084",
  "module": "Ambica Finance",
  "name": "Auto Account Entry for Customer",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Customer",
  "script": "com = frappe.db.get_list('Company', pluck='name')\ndata = frappe.new_doc(\"Account\")\nrec = \"Accounts Receivable\"\nfor i in range(len(com)):\n   \n    if com[i] == doc.custom_comapny:\n        frappe.msgprint(com[i])\n        dt = frappe.db.sql(\"SELECT name FROM `tabAccount` WHERE name LIKE %s and company=%s\", ('%' + rec + '%', com[i]), as_dict=True)\n        frappe.msgprint(str(dt))\n        data.company = doc.custom_comapny\n        data.account_name = doc.name\n        data.account_type = \"Receivable\"\n        data.parent_account = dt[0][\"name\"]\n        data.save()\n\n# Uncomment the line below to commit changes to the database\n# frappe.db.commit()\n",
  "script_type": "DocType Event"
 }
]